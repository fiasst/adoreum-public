var FORMS=function($,e,t,a){var r={toggleCustomInputField:function(e,t,a){e&&e.hasClass("w--redirected-checked")!==a&&e.trigger("click"),t.prop("checked",a)}};return $((function(){USER.getCurrentMember((function(e){if(HELP.checkKeyExists(e,"id")){var t=$(".input-member-id");t&&!t.val()&&(t.val(e.id),t.parents("form").find(".form-submit").removeAttr("disabled"))}}));const e=HELP.getSetQuerystring("dest");e&&$("form").find(".fp_redirect").attr("data-redirect","/"+e),$("form").on("submit",(function(){var e=$(this).find(".fp_redirect").attr("data-redirect");e&&localStorage.setItem("fp_redirect",e)}));var a=0;$(".bouncer .input-wrapper").each((function(e,t){var r="error-wrapper-"+a++;$(t).append($('<div class="error-wrapper" id="'+r+'" />')).find(":input").attr("data-bouncer-target","#"+r)}));new Bouncer("form.bouncer",{fieldClass:"error",errorClass:"error-text",fieldPrefix:"bouncer-field_",errorPrefix:"bouncer-error_",disableSubmit:!0,messages:{missingValue:{checkbox:"This field is required",radio:"Please select an option",select:"Please select an option","select-multiple":"Please select one or more options",default:"This field is required"},patternMismatch:{email:"Please enter a valid email address",url:"Please enter a valid URL (Example: http://example.com)",number:"Please enter a number",color:"Please match the following format: #rrggbb",date:"Please use the YYYY-MM-DD format",time:"Please use the 24-hour time format (Example: 23:00)",month:"Please use the YYYY-MM format (Example: 2065-08)",default:"Please enter a value in the required format"},outOfRange:{over:"Value must not exceed {max} characters",under:"Value must not be lower than {min} characters"},wrongLength:{over:"Value must not exceed {maxLength} characters",under:"Value must not be lower than {minLength} characters"},fallback:"There was an error with this field"}});$(t).on("bouncerShowError bouncerRemoveError",(function(e){$(e.target).parents(".input-wrapper").toggleClass("error","bouncerShowError"==e.type)})).on("bouncerFormValid",(function(e){let t=event.target;$(t).hasClass("ajax")?(console.log("ajax"),i(e)):(console.log("native"),t.submit())})),$(".ajax-submit").on("click",".form-submit",(function(e){$(e.target).addClass("clicked")})).on("submit",(function(e){e.preventDefault(),i(e)}));const i=e=>{var t=$(e.target),a=t.find(".form-submit.clicked"),r=t.attr("data-validation"),i=t.attr("data-form-values-type");if(r&&!HELP.callNestedFunction(r))return console.log("Validation failed"),MAIN.buttonThinking(a,!0),!1;var n=HELP.getFormValues(t,i),o=HELP.getCookie("form-valid");o=o?Number(o):0,o=++o,"formData"==i?n.set("increment",o):n.increment=o,HELP.setCookie("form-valid",o);var l={url:t.attr("action"),method:t.attr("method"),data:n,timeout:12e4,callbackSuccess:function(e){MAIN.thinking(!1),MAIN.handleAjaxResponse(e,t)},callbackError:function(e){MAIN.thinking(!1),console.log("error")}};"formData"==i&&(l.processData=!1,l.contentType=!1,l.cache=!1),MAIN.buttonThinking(a),MAIN.thinking(!0,!1),console.log("data: ",l.data),HELP.sendAJAX(l,t)};$(":input[data-default-value]").inputAttrDefaultValue(),$(".input-default-value").inputDefaultValue(),$(".w-form-formradioinput--inputType-custom").each((function(){var e=$(this),t=e.siblings(":input"),a=e.hasClass("w--redirected-checked");a&&r.toggleCustomInputField(e,t,a)})),$(":input[data-maxlength]").each((function(){$(this).attr("maxlength",HELP.sanitizeHTML($(this).attr("data-maxlength")))})),$(".format-ddmmyyyy").on("keyup",(function(e){e&&"Backspace"!=e.key&&"Delete"!=e.key&&$(this).val(HELP.formatDDMMYYYY($(this).val()))})),$(".select-list-options").buildSelectOptions()})),r}(jQuery,0,this.document);$.fn.inputAttrDefaultValue=function(){$(this).each((function(){var e=$(this),t=e.attr("data-default-value");e.val()||("number"==e.attr("type")&&(t=HELP.removeNonNumeric(t)),e.val(HELP.sanitizeHTML(t)).trigger("change"))}))},$.fn.inputDefaultValue=function(){$(this).each((function(){var e=$(this),t=e.text(),a=e.parents(".input-wrapper").find(":input"),r=a.eq(0).attr("type");"checkbox"==r||"radio"==r?a.each((function(){var e=$(this).siblings(`.w-${r}-input`),a=!!t&&t==$(this).val();"checkbox"==r&&(a=!!t&&"false"!==t),FORMS.toggleCustomInputField(e,$(this),a)})):a.val()||(a.hasClass("editor")?a.val(e.html()):a.val(HELP.stripHTMLWithLinebreaks(e.html())),a.trigger("change"))}))},$.fn.buildSelectOptions=function(e){e=e||{},$.each(this,(function(e,t){var a=$(this).parent(".select-list-wrapper"),r=$("select",a),i=$(".input-default-value",a),n=HELP.sanitizeHTML(i.text()?i.text():i.attr("data-value"))||"",o=[],l=r.is("select[multiple]");l&&(n=n.split("|")),$(this).find(".w-dyn-item").each((function(){var e=$.trim($(this).text()),t=e==n&&"selected";l&&(t=$.inArray(e,n)>-1),!e||$.inArray(e,o)>-1||(o.push(e),$("<option />",{value:e,selected:t}).text(e).appendTo(r))})),r.trigger("change")}))},jQuery.expr[":"].selectedInput=(e,t,a)=>"checkbox"==e.type||"radio"==e.type?e.checked:["submit","button","reset","hidden"].indexOf(e.type)<0&&e.value;